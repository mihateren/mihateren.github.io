<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(2)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(2) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(2) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(2) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Глава 2. Типы данных | База знаний</title> <meta name="generator" content="Jekyll v3.10.0" /> <meta property="og:title" content="Глава 2. Типы данных" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Методичка по Java, PostgreSQL, Spring и другим технологиям backend-разработки" /> <meta property="og:description" content="Методичка по Java, PostgreSQL, Spring и другим технологиям backend-разработки" /> <link rel="canonical" href="http://localhost:4000/chapters/chapter2.html" /> <meta property="og:url" content="http://localhost:4000/chapters/chapter2.html" /> <meta property="og:site_name" content="База знаний" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Глава 2. Типы данных" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Методичка по Java, PostgreSQL, Spring и другим технологиям backend-разработки","headline":"Глава 2. Типы данных","url":"http://localhost:4000/chapters/chapter2.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> База знаний </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Главная</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Java Core category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/java-core.html" class="nav-list-link">Java Core</a><ul class="nav-list"><li class="nav-list-item"><a href="/chapters/chapter1.html" class="nav-list-link">Глава 1. JVM и первая программа</a></li><li class="nav-list-item"><a href="/chapters/chapter2.html" class="nav-list-link">Глава 2. Типы данных</a></li><li class="nav-list-item"><a href="/chapters/chapter3.html" class="nav-list-link">Глава 3. Условный оператор</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search База знаний" aria-label="Search База знаний" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/java-core.html">Java Core</a></li> <li class="breadcrumb-nav-list-item"><span>Глава 2. Типы данных</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="глава-2-типы-данных"> <a href="#глава-2-типы-данных" class="anchor-heading" aria-labelledby="глава-2-типы-данных"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Глава 2. Типы данных </h1> <h2 id="1-переменные"> <a href="#1-переменные" class="anchor-heading" aria-labelledby="1-переменные"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. Переменные </h2> <p>Представьте, что вы — маленький ребенок, который везде с собой носит коробочку. В эту коробочку вы кладете все, что вам нравится: камешки, конфеты, игрушки, мусор, но с единственным ограничением — в коробочке можно хранить <strong>только один предмет</strong>, или если вернуться в мир программирования — <strong>только одно значение</strong>.</p> <p>То есть, если вы решили, что в коробочке должен лежать камень, а в ней уже есть конфета, то вы обязаны убрать конфету, и положить туда камень. Такова суровая реальность.</p> <p>В Java, как и в других высокоуровневых языках программирования, вы, как разработчик, не задумываетесь над тем, куда пропадает предыдущее значение переменной. За вас его в памяти компьютера перезаписывает процессор (то есть кладет новое значение вместо старого).</p> <p>Именно так работают переменные. По сути это просто контейнеры для каких—то данных.</p> <p>В Java переменные объявляются следующим образом:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span> <span class="c1">// целочисленная переменная</span>
<span class="kt">double</span> <span class="n">b</span> <span class="o">=</span> <span class="mf">36.6</span><span class="o">;</span> <span class="c1">// число с плавающей точкой</span>
</code></pre></div></div> <p>Давайте поймем что тут происходит:</p> <p>1) Первым словом мы <strong>всегда пишем тип данных</strong>. О типах данных мы поговорим ниже.<br /> 2) Затем мы пишем <strong>имя переменной</strong> по которому мы будем обращаться к ней, для того, чтобы работать с ее <strong>значением</strong>.<br /> 3) Ставим равно и пишем какое значение хотим туда положить.<br /> 4) Не забываем точку с запятой)</p> <p>В нашем случае <code class="language-plaintext highlighter-rouge">int</code> и <code class="language-plaintext highlighter-rouge">double</code> являются типами данных для переменных <code class="language-plaintext highlighter-rouge">a</code> и <code class="language-plaintext highlighter-rouge">b</code> соответственно.</p> <h2 id="2-кто-такие-эти-типы"> <a href="#2-кто-такие-эти-типы" class="anchor-heading" aria-labelledby="2-кто-такие-эти-типы"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. Кто такие эти типы </h2> <h3 id="целые-типы-данных-byte-short-int-long"> <a href="#целые-типы-данных-byte-short-int-long" class="anchor-heading" aria-labelledby="целые-типы-данных-byte-short-int-long"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Целые типы данных (byte, short, int, long) </h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">10</span><span class="o">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">3</span><span class="o">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">);</span>   <span class="c1">// 13  — обычное сложение</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">a</span> <span class="o">/</span> <span class="n">b</span><span class="o">);</span>   <span class="c1">// 3   — дробная часть отбрасывается (целочисленное деление)</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">b</span> <span class="o">==</span> <span class="n">c</span><span class="o">);</span> <span class="c1">// true — логическое значение</span>

<span class="c1">// Переполнение на "узком" типе</span>
<span class="kt">byte</span> <span class="n">small</span> <span class="o">=</span> <span class="mi">127</span><span class="o">;</span>            <span class="c1">// макс. значение byte</span>
<span class="n">small</span><span class="o">++;</span>                     <span class="c1">// +1 → «обнуляется» и уходит в –128</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">small</span><span class="o">);</span>   <span class="c1">// —128</span>
</code></pre></div></div> <p>Про переполнения подробнее <a href="https://patrakhin.github.io/posts/overflow/">тут</a></p> <h3 id="вещественные-числа-float-double"> <a href="#вещественные-числа-float-double" class="anchor-heading" aria-labelledby="вещественные-числа-float-double"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Вещественные числа (float, double) </h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="mf">10.0</span><span class="o">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mf">3.0</span><span class="o">;</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">x</span> <span class="o">/</span> <span class="n">y</span><span class="o">);</span>   <span class="c1">// 3.3333333333333335 — деление с остатком</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="o">);</span>   <span class="c1">// 30.0</span>
</code></pre></div></div> <h3 id="символы-char"> <a href="#символы-char" class="anchor-heading" aria-labelledby="символы-char"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Символы (char) </h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="sc">'A'</span><span class="o">;</span>                <span class="c1">// Юникод‑код 65</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>       <span class="c1">// A</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">c</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>   <span class="c1">// 66 (65 + 1) — арифметика разрешена, результат → int</span>
</code></pre></div></div> <h3 id="логический-тип-boolean"> <a href="#логический-тип-boolean" class="anchor-heading" aria-labelledby="логический-тип-boolean"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Логический тип (boolean) </h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">boolean</span> <span class="n">p</span> <span class="o">=</span> <span class="kc">true</span><span class="o">,</span> <span class="n">q</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">p</span> <span class="o">&amp;&amp;</span> <span class="n">q</span><span class="o">);</span>  <span class="c1">// false — логическое «И»</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">p</span> <span class="o">||</span> <span class="n">q</span><span class="o">);</span>  <span class="c1">// true  — логическое «ИЛИ»</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(!</span><span class="n">p</span><span class="o">);</span>      <span class="c1">// false — логическое «НЕ»</span>
</code></pre></div></div> <p>Итак, типы данных определяют два ключевых момента:<br /> 1) Сколько памяти нужно выделить для конкретной переменной<br /> 2) Какие операции над переменной разрешены</p> <h3 id="строки-string"> <a href="#строки-string" class="anchor-heading" aria-labelledby="строки-string"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Строки (String) </h3> <p>А можно ли хранить строки? Конечно можно, например вот так:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span> <span class="n">s</span> <span class="o">=</span> <span class="s">"Строка с текстом"</span><span class="o">;</span>
</code></pre></div></div> <p>Или вот так:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span> <span class="n">s2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">(</span><span class="s">"Еще одна строка с текстом"</span><span class="o">);</span>
</code></pre></div></div> <p>В чем разница? Почему типы данных для чисел мы обозначали с маленьких букв, а для строк — с больших? Почему можно инициализировать строковую переменную просто через кавычки, а можно через <code class="language-plaintext highlighter-rouge">new</code>? Давайте разбираться.</p> <h2 id="3-примитивы-vs-объекты-стек-vs-куча"> <a href="#3-примитивы-vs-объекты-стек-vs-куча" class="anchor-heading" aria-labelledby="3-примитивы-vs-объекты-стек-vs-куча"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. Примитивы vs объекты. Стек vs куча </h2> <h3 id="примитивные-типы"> <a href="#примитивные-типы" class="anchor-heading" aria-labelledby="примитивные-типы"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Примитивные типы </h3> <p>В Java типы данных делятся на два типа: примитивы и объекты.</p> <p>Первое относится к тем типам данных, которые пишутся с маленькой буквы (int, boolean, char и др). Они хранятся на <em>стеке</em> (кроме полей класса, но об этом позже), имеют дефолтные значения и заданный диапазон.</p> <h3 id="объекты"> <a href="#объекты" class="anchor-heading" aria-labelledby="объекты"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Объекты </h3> <p>Объекты же — это составные типы данных, которые могут иметь в себе несколько полей из примитивов или же тоже объектов.</p> <p>Например определим класс котиков, который хранит и примитивы и объекты в своих полях:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Cat</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">age</span><span class="o">;</span> <span class="c1">// примитив</span>
    <span class="nc">String</span> <span class="n">name</span><span class="o">;</span> <span class="c1">// объект</span>
    <span class="kt">boolean</span> <span class="n">isWellFed</span><span class="o">;</span> <span class="c1">// примитив</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="стек"> <a href="#стек" class="anchor-heading" aria-labelledby="стек"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Стек </h3> <p>Стек и куча — два отдела оперативной памяти, где JVM (или другая среда выполнения) хранит данные во время работы программы.</p> <p>Стек помимо примитивов хранит вызовы функций, <em>ссылки на объекты</em> и много другой системной информации, необходимой для работы программы. Стек как правило занимает не очень много места (порядка 1—8 мегабайт по умолчанию).</p> <h3 id="куча"> <a href="#куча" class="anchor-heading" aria-labelledby="куча"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Куча </h3> <p>Куча — это более объемная часть памяти, которая сохраняет в себе целые объекты. Объектами в Java является все, кроме примитивов (парадоксально). Куча по умолчанию занимает несколько гигабайт.</p> <p>Более подробно про работу этих двух участков памяти советую почитать <a href="https://topjava.ru/blog/stack—and—heap—in—java">тут</a>.</p> <h3 id="пример-размещения-объектов-и-ссылок"> <a href="#пример-размещения-объектов-и-ссылок" class="anchor-heading" aria-labelledby="пример-размещения-объектов-и-ссылок"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Пример размещения объектов и ссылок </h3> <p>Таким образом, если мы создаем экземпляр котика:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Cat</span> <span class="n">vasya</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Cat</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="s">"Вася"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
</code></pre></div></div> <p>То переменная—ссылка vasya расположится на стеке, а сам объект Cat уже на куче. Упрощенная схема изображена на рисунке</p> <p><img src="/chapters/stack.png" alt="Стек и куча" /></p> <p>Таким образом, когда мы будем обращаться к какому—то полю объекта vasya, Java перейдет по ссылке из стека в кучу и достанет нам это поле. Например:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Cat</span> <span class="n">vasya</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Cat</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="s">"Вася"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">vasya</span><span class="o">.</span><span class="na">name</span><span class="o">);</span> <span class="c1">// Вася</span>
</code></pre></div></div> <p>А что там со строками? Почему мы создавали через кавычки и через new?</p> <h2 id="4-строки-и-строковый-пул"> <a href="#4-строки-и-строковый-пул" class="anchor-heading" aria-labelledby="4-строки-и-строковый-пул"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4. Строки и строковый пул </h2> <h3 id="сравнение-строк-и-string-pool"> <a href="#сравнение-строк-и-string-pool" class="anchor-heading" aria-labelledby="сравнение-строк-и-string-pool"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Сравнение строк и String pool </h3> <p>Мы уже убедились, что ссылки хранятся в стеке, а реальные объекты — в куче.</p> <p>Но со строками всё чуть хитрее: Java держит для них отдельный шкафчик — String Pool (чаще переводят как строковый пул или таблица строк‑литералов).</p> <p>Давайте рассмотрим небольшой пример и увидим магию.</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span> <span class="n">s1</span> <span class="o">=</span> <span class="s">"Hello"</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">s2</span> <span class="o">=</span> <span class="s">"Hello"</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">s3</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">(</span><span class="s">"Hello"</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span> <span class="o">==</span> <span class="n">s2</span><span class="o">);</span> <span class="c1">// true</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span> <span class="o">==</span> <span class="n">s3</span><span class="o">);</span> <span class="c1">// false</span>
</code></pre></div></div> <p>В первом случае Java нам сказала, что строка s1 равна строке s2. Все логично.</p> <p>Но почему s1 не равно s3? Ведь <code class="language-plaintext highlighter-rouge">Hello</code> и <code class="language-plaintext highlighter-rouge">Hello</code> ничем не отличается, можете побуквенно проверить. Java врет?</p> <p>На самом деле нет. Все дело в оптимизациях JVM. В JVM строки (как и любые объекты) хранятся на куче, но в отдельной ее части, называемой стринг пулом (String pool). Java понимает, чтоо строки s1 и s2 полностью совпадают, и поэтому нет смысла выделять в памяти новый объект, ведь можно просто ссылку s2 направить в тот же участок памяти, куда указывает и s1.</p> <p>А вот со сторокой s3 все просто — поскольку мы написали оператор <code class="language-plaintext highlighter-rouge">new</code>, то мы указали JVM, что нам нужно выделить именно <strong>новый</strong> участок памяти, в который мы положим строку <code class="language-plaintext highlighter-rouge">Hello</code> (уже другую, отличную от s1).</p> <p>Ну и последним аргументом в пользу правоты Java будет сравнение объектов. Java любые объекты сравнивает по ссылкам, если мы их пытаемся сравнить через оператор сравнения <code class="language-plaintext highlighter-rouge">==</code>. Если же мы хотим сравнить именно <strong>содержимое</strong> этих строк, то можно использовать метод <code class="language-plaintext highlighter-rouge">equals</code>:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span> <span class="n">s1</span> <span class="o">=</span> <span class="s">"Hello"</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">s2</span> <span class="o">=</span> <span class="s">"Hello"</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">s3</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">(</span><span class="s">"Hello"</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">s2</span><span class="o">));</span> <span class="c1">// true</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">s3</span><span class="o">));</span> <span class="c1">// true</span>
</code></pre></div></div> <p>При использовании <code class="language-plaintext highlighter-rouge">equals</code> строки сравниваются именно по <strong>содержимому</strong>, и в этом примере мы, логично, получаем два <code class="language-plaintext highlighter-rouge">true</code>.</p> <h3 id="как-работает-создание-строк"> <a href="#как-работает-создание-строк" class="anchor-heading" aria-labelledby="как-работает-создание-строк"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Как работает создание строк </h3> <p>Таким образом, последовательность создания переменной—строки для JVM следующая: 1) Если используем оператор <code class="language-plaintext highlighter-rouge">new</code>, просто выделяем новый участок памяти и указываем ссылку на него.<br /> 2) Иначе, просмотреть String pool на наличие такой же строки, и если она найдена — положить в новую переменную ссылку на нее. Если такая строка не найдена, выделить новый участок памяти и положить ссылку на нее в переменную.</p> <p>Более подробно про методы работы со строками можно почитать <a href="https://metanit.com/java/tutorial/7.2.php">здесь</a>.</p> <h3 id="иммутабельность-строк"> <a href="#иммутабельность-строк" class="anchor-heading" aria-labelledby="иммутабельность-строк"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Иммутабельность строк </h3> <p>Есть еще очень важный момент, который нужно знать про строки. На самом деле <strong>строки не изменяемы</strong>.</p> <p>Как же так? Ведь мы можем спокойно выполнить следующий код:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">"Вася"</span><span class="o">;</span>
<span class="n">name</span> <span class="o">+=</span> <span class="s">" Пупкин"</span><span class="o">;</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">name</span><span class="o">);</span> <span class="c1">// Вася Пупкин</span>
</code></pre></div></div> <p>Кажется, что строка изменилась, ведь это логично видно из вывода программы. Но все сложнее.</p> <p>Что на самом деле происходит в этот момент: 1) Первая строка кладёт в переменную name ссылку на готовый литерал “Вася” из строкового пула.<br /> 2) Оператор <code class="language-plaintext highlighter-rouge">+=</code> не пытается “дописать” символы в тот же объект — вместо этого компилятор разворачивает его в <code class="language-plaintext highlighter-rouge">name = new StringBuilder(name).append(" Пупкин").toString();</code>.<br /> 3) StringBuilder склеивает два текста и вызывает <code class="language-plaintext highlighter-rouge">.toString()</code>, которое отдаёт совершенно новый объект — уже в обычной куче. Переменная name переезжает на эту свежесозданную строку; старая “Вася” остаётся нетронутой и может жить дальше, если где‑то ещё на неё ссылаются (например, в пуле).</p> <p>То есть мы не «меняем» строку, а просто оставляем старую и берём новую.</p> <p>Представьте, что каждая строка в Java — это табличка, приклеенная к двери. Как только клей застыл, надпись уже не сломать и не заменить: можно лишь перевесить табличку или сделать новую. Эта “застывшая надпись” и есть <strong>иммутабельность</strong> (immutable), то есть неизменяемость.</p> <p>Зачем такой жёсткий подход? Во‑первых, ради экономии памяти. Строки‑литералы лежат в строковом пуле и могут раздаваться разным переменным как визитные карточки: надпись одна, а держателей десятки.</p> <p>Во‑вторых, безопасность. Представь, что веб‑приложение сначала проверяет строку‑путь “uploads/avatar.png”: убеждается, что она лежит только в папке /uploads, не содержит ../, нет спец‑символов. Проверка прошла — значит, строке доверили и передают её дальше, например в код, который реально открывает файл. Если бы строка могла меняться, злоумышленник, удерживая ссылку на тот же объект, мог бы между этими двумя шагами превратить путь в ”../../etc/passwd” и получить доступ к системным файлам.</p> <p>Иммутабельность обрубает атаку «в два приёма»: после валидации объект уже забетонирован — во время передачи по цепочке методов его содержимое гарантированно остаётся тем же самым. Тот же принцип защищает и любые другие критические строки, по которым принимаются решения — от имён классов в механизме ClassLoader до ключей доступа в SecurityManager: проверил один раз — можешь больше не оглядываться, строку никто тихонько не подменит.</p> <p>Наконец, производительность JIT‑компилятора. Иммутабельные строки компилятор смело «сворачивает» в константы и вклеивает прямо в байткод, сокращая время на склейку каждого «Hello, ” + name`. Если бы строки можно было править, о таких оптимизациях пришлось бы забыть.</p> <p>Итог: клей на табличке — это гарант, что память используется бережно, потоки не дерутся, а виртуальная машина может разгоняться до максимума, не опасаясь внезапных «редактирований» текста на ходу.</p> <h3 id="внутреннее-устройство-строк"> <a href="#внутреннее-устройство-строк" class="anchor-heading" aria-labelledby="внутреннее-устройство-строк"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Внутреннее устройство строк </h3> <p>И последнее, что сегодня обсудим про строки — их представление в коде (привет Си с ее char[]).</p> <p>Строка в Java — это не «голый» массив букв, а целая коробка‑органайзер.</p> <p>Внутри, конечно, лежит набор символов (до Java 9 — char[], с Java 9 — компактный byte[] плюс флажок‑кодировщик), но рядом прячутся служебные ярлыки: закэшированный hash, метка кодировки, да и сам буфер объявлен final, чтобы никто не дорвался переклеить буквы.</p> <h2 id="резюме"> <a href="#резюме" class="anchor-heading" aria-labelledby="резюме"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Резюме </h2> <p>В этой главе мы разобрались, с тем, как Java хранит наши данные — с помощью переменных. Коробочка‑переменная всегда вмещает только один предмет: положил камень — конфету придётся вынуть. Чтобы компьютер знал, сколько места резервировать под этот «камень» и какие с ним допустимы действия, мы клеим на коробку ярлык‑тип. Примитивы (int, double, boolean…) легки и просты: живут на стеке, имеют фиксированный вес и набор операций. Объекты же — настоящие матрёшки: сами лежат в куче, а на стеке остаётся лишь ссылка‑указатель.</p> <p>Самый яркий пример — строки. Литералы в кавычках JVM складывает в отдельный «строковый пул», чтобы не плодить дубликаты: две переменные могут смотреть на один и тот же “Hello”. А вот <code class="language-plaintext highlighter-rouge">new String("Hello")</code> — вынужденная роскошь, создающая свежий объект в куче и отнимающая лишние байты.</p> <p>В сухом остатке: типы данных определяют объём памяти и набор допустимых операций, стек хранит примитивы и ссылки, куча — реальные объекты, а строковый пул экономит место, повторно используя одинаковые тексты.</p> <h2 id="доп-материалы"> <a href="#доп-материалы" class="anchor-heading" aria-labelledby="доп-материалы"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Доп материалы </h2> <ol> <li><a href="https://metanit.com/java/tutorial/7.2.php">Методы работы со строками</a></li> <li><a href="https://patrakhin.github.io/posts/overflow/">Переполнение типов</a></li> <li><a href="https://topjava.ru/blog/stack—and—heap—in—java">Работа стека и кучи</a></li> <li><a href="https://metanit.com/java/tutorial/7.3.php">StringBuilder</a></li> <li><a href="https://metanit.com/java/tutorial/2.9.php">Консольный ввод-вывод</a> (без этого домашку не сделать)</li> </ol> <h2 id="домашнее-задание"> <a href="#домашнее-задание" class="anchor-heading" aria-labelledby="домашнее-задание"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Домашнее задание </h2> <h3 id="задача-1-сумма-двух-чисел"> <a href="#задача-1-сумма-двух-чисел" class="anchor-heading" aria-labelledby="задача-1-сумма-двух-чисел"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Задача 1. Сумма двух чисел </h3> <p><strong>Условие:</strong><br /> Даны два целых числа <code class="language-plaintext highlighter-rouge">a</code> и <code class="language-plaintext highlighter-rouge">b</code>. Напишите программу, которая вычисляет их сумму.</p> <p><strong>Входные данные:</strong><br /> Два числа через пробел (<code class="language-plaintext highlighter-rouge">-100 ≤ a, b ≤ 100</code>).</p> <p><strong>Выходные данные:</strong><br /> Одно число — результат сложения.</p> <p><strong>Пример:</strong><br /> Вход: 5 3<br /> Выход 8</p><hr /> <h3 id="задача-2-деление-с-точностью"> <a href="#задача-2-деление-с-точностью" class="anchor-heading" aria-labelledby="задача-2-деление-с-точностью"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Задача 2. Деление с точностью </h3> <p><strong>Условие:</strong><br /> Даны два целых числа <code class="language-plaintext highlighter-rouge">x</code> и <code class="language-plaintext highlighter-rouge">y</code>. Выведите результат деления <code class="language-plaintext highlighter-rouge">x / y</code> с точностью до 3 знаков после запятой.</p> <p><strong>Входные данные:</strong><br /> Два числа через пробел (<code class="language-plaintext highlighter-rouge">1 ≤ y ≤ 100</code>, <code class="language-plaintext highlighter-rouge">-1000 ≤ x ≤ 1000</code>).</p> <p><strong>Выходные данные:</strong><br /> Вещественное число (округлить до 3 знаков).</p> <p><strong>Пример:</strong><br /> Вход: 7 3<br /> Выход: 2.333</p><hr /> <h3 id="задача-3-следующий-символ"> <a href="#задача-3-следующий-символ" class="anchor-heading" aria-labelledby="задача-3-следующий-символ"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Задача 3. Следующий символ </h3> <p><strong>Условие:</strong><br /> Дана английская буква в нижнем регистре. Выведите следующий за ней символ в алфавите (если это ‘z’, выведите ‘a’).</p> <p><strong>Входные данные:</strong><br /> Один символ (<code class="language-plaintext highlighter-rouge">a ≤ char ≤ z</code>).</p> <p><strong>Выходные данные:</strong><br /> Один символ.</p> <p><strong>Пример:</strong><br /> Вход: c<br /> Выход: d</p><hr /> <h3 id="задача-4-длина-строки"> <a href="#задача-4-длина-строки" class="anchor-heading" aria-labelledby="задача-4-длина-строки"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Задача 4. Длина строки </h3> <p><strong>Условие:</strong><br /> Дана строка <code class="language-plaintext highlighter-rouge">s</code> (без пробелов). Выведите её длину.</p> <p><strong>Входные данные:</strong><br /> Строка (до 100 символов).</p> <p><strong>Выходные данные:</strong><br /> Целое число — длина строки. Вход: “hello”<br /> Выход: 5</p><hr /> <h3 id="задача-5-чётноенечётное"> <a href="#задача-5-чётноенечётное" class="anchor-heading" aria-labelledby="задача-5-чётноенечётное"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Задача 5. Чётное/нечётное </h3> <p><strong>Условие:</strong><br /> Дано целое число <code class="language-plaintext highlighter-rouge">n</code>. Определите, является ли оно чётным.</p> <p><strong>Входные данные:</strong><br /> Одно число (<code class="language-plaintext highlighter-rouge">-1000 ≤ n ≤ 1000</code>).</p> <p><strong>Выходные данные:</strong><br /> Строка <code class="language-plaintext highlighter-rouge">"even"</code> (чётное) или <code class="language-plaintext highlighter-rouge">"odd"</code> (нечётное).</p> <p><strong>Пример:</strong><br /> Вход: 7<br /> Выход: odd</p> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
